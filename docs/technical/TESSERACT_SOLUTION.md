# Решение: Tesseract OCR для измерительных приборов

## Проблема
Vision модели слишком медленные (1-6 минут). Нужен ответ за 3-5 секунд.

## Решение: Улучшенный Tesseract OCR

### Что делает Tesseract
1. Распознает ВСЕ цифры и текст на изображении
2. Извлекает значения со шкал приборов
3. Работает за 1-2 секунды

### Оптимизация Tesseract для приборов

```javascript
// Специальная конфигурация для цифр и измерительных приборов
const tesseractConfig = {
  lang: 'rus+eng',
  
  // PSM 6 - предполагает единый блок текста
  psm: 6,
  
  // Только цифры и базовые символы
  tessedit_char_whitelist: '0123456789.,°CАампервтсекундлинйкмч',
  
  // Улучшенное распознавание цифр
  classify_bln_numeric_mode: 1,
  
  // Предобработка изображения
  preprocess: {
    // Увеличить контраст
    contrast: 1.5,
    // Бинаризация (черно-белое)
    threshold: true,
    // Увеличить размер для лучшего распознавания
    scale: 2.0
  }
};
```

### Результат

**Было:**
- Vision модель: 1-6 минут
- Общий ответ без конкретики

**Стало:**
- Tesseract OCR: 1-2 секунды
- qwen2.5:7b анализ: 3-5 секунд
- **Итого: 5-7 секунд с конкретными значениями**

## Пример работы

### Вход (изображение):
```
[Термометр с делениями 35, 37, 39, 41]
[Линейка с делениями 0, 1, 2, 3 см]
[Секундомер с делениями 0, 5, 10, 15]
```

### Tesseract распознает:
```
35 37 39 41 термометр
0 1 2 3 см линейка
0 5 10 15 секундомер
0 2 4 6 8 А амперметр
0 50 100 150 200 км/ч спидометр
```

### qwen2.5:7b анализирует:
```
Цена деления:
- Термометр: (41-35)/3 = 2°C
- Линейка: (3-0)/3 = 1 см
- Секундомер: (15-0)/3 = 5 сек
- Амперметр: (8-0)/4 = 2 А
- Спидометр: (200-0)/4 = 50 км/ч
```

## Реализация

Нужно улучшить клиентскую часть (браузер), где работает Tesseract.

### Где находится код:
- `src/routes/sessions/[id]/+page.svelte` - загрузка изображений
- `src/lib/modules/document/engines/TesseractOCR.js` - OCR движок

### Что улучшить:
1. Предобработка изображения (контраст, бинаризация)
2. Специальная конфигурация для цифр
3. Распознавание в несколько проходов (разные PSM режимы)

## Итог

Tesseract OCR + qwen2.5:7b = **5-7 секунд** вместо 1-6 минут!
