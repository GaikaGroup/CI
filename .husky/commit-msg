#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Validate commit message format using commitlint
echo "ğŸ” Validating commit message format..."

npx --no -- commitlint --edit ${1}

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Commit message validation failed!"
  echo ""
  echo "ğŸ“ Valid commit format:"
  echo "   <type>(<scope>): <subject>"
  echo ""
  echo "ğŸ“Œ Examples:"
  echo "   feat(chat): add voice streaming support"
  echo "   fix(auth): resolve session timeout issue"
  echo "   docs: update API documentation"
  echo "   chore: upgrade dependencies"
  echo ""
  echo "ğŸ”— See CONTRIBUTING.md for more details"
  exit 1
fi

echo "âœ… Commit message is valid!"
